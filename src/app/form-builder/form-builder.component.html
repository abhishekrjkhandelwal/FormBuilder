<div class="main-div">
<mat-card>
  <mat-card-header>Form Builder</mat-card-header>
  <br />
  <br />
  <form [formGroup] = "formBuilderForm" id="formBuilderForm">
    <mat-form-field>  
        <input matInput name="name" formControlName="name" type="name" placeholder="Enter Username" [ngClass] = "{'is-invalid': (submitted || formBuilderForm.controls.name.touched) && formBuilderForm.controls.name.errors }" />
          <mat-error>
            <div *ngIf="formBuilderForm.value.name.length != 0">
              <div *ngIf="((submitted || formBuilderForm.controls.name.touched) && formBuilderForm.controls.name.errors)" class="invalid-input"></div>
            </div>
            <div *ngIf="formBuilderForm.controls.name.errors?.required">name is required && only 20 characters allowed</div>
          </mat-error>
      </mat-form-field>

    <mat-form-field class="email">
      <input matInput name="email" formControlName="email" type="text" placeholder="E-Mail" [ngClass] = "{'is-invalid': (submitted || formBuilderForm.controls.email.touched) && formBuilderForm.controls.email.errors }" (ngModelChange) = "extractEmailList($event)" maxlength="200"/>
      <mat-error>
        <div *ngIf="formBuilderForm.value.email.length != 0">
          <div *ngIf="((submitted || formBuilderForm.controls.email.touched) && formBuilderForm.controls.email.errors),"  class="invalid-input">Enter Valid Email Id</div>
        </div>
        <div *ngIf="formBuilderForm.controls.email.errors?.required">Email is required</div>
      </mat-error>
    </mat-form-field>

    <input type="radio" formControlName="gender" value="male" required> Male
    <input type="radio" formControlName="gender" value="female"required> Female

    <mat-form-field class="number">
      <input matInput name="adhaarNumber" formControlName="adhaarNumber"  placeholder="Adhaar Number" [ngClass] = "{'is-invalid': (submitted || formBuilderForm.controls.adhaarNumber.touched) && formBuilderForm.controls.adhaarNumber.errors }" />
      <mat-error>
        <div *ngIf="formBuilderForm.value.adhaarNumber.length === 0">
          <div *ngIf="((submitted || formBuilderForm.controls.adhaarNumber.touched) && formBuilderForm.controls.adhaarNumber.errors),"  class="invalid-input">Enter Valid Adhaar Number</div>
        </div>
        <div *ngIf="formBuilderForm.controls.adhaarNumber.errors?.required">Adhaar Number is required</div>
      </mat-error>
    </mat-form-field>

     <select id="country" formControlName="country">
       <option *ngFor="let c of countries" [ngValue]="c">{{ c }}</option>
     </select>

     <br />

     <div>
        <button mat-stroked-button type="button" (click)="filePicker.click()" >Pick Profile Image</button>
        <input id="fileItem" accept="image/*" type="file" #filePicker (change)="onImagePicked($event)" >
     </div>

     <div class="image-preview" *ngIf="imagePreview !== '' && imagePreview && formBuilderForm?.get('image')?.valid" >
       <img [src]="imagePreview" [alt] = "formBuilderForm.value.name">
     </div>

    <br />
    <br />
    <button mat-raised-button color="primary" (click)="postFormData();" [disabled]="(formBuilderForm.value.length === 0)" type="submit">Send</button>
  </form>


</mat-card>
</div>

<br />
<br />

<table class="styled-table">
   <thead>
     <th>ID</th>
     <th>Name</th>
     <th>Email</th>
     <th>Gender</th>
     <th>Adhaar Number</th>
     <th>Country</th>
     <th>Update</th>
     <th>Delete</th>
   </thead>

   <tbody>
     <tr *ngFor = "let formdata of formData">
        <td>{{ formdata._id }}</td>
        <td>{{ formdata.name }}</td>
        <td>{{ formdata.email }}</td>
        <td>{{ formdata.gender }}</td>
        <td>{{ formdata.adhaarNumber }}</td>
        <td>{{ formdata.country }}</td>
        <td><button id="update" (click)="openformBuilderDialog($event, formdata.name)">Update</button></td>
        <td><button id="delete" (click)="deleteFormDataByName($event, formdata.name)" >Delete</button></td>   
     </tr>
   </tbody>
</table>